/*!
<<<<<<< HEAD:dist/RootCmp_SEARCH__default.c951834490d828308fef.js
 * @version f2442e6-dev
=======
 * @version f78ba83-dev
>>>>>>> origin/development:dist/RootCmp_SEARCH__default.5b2dbe559d36ad37a156.js
 * 
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{IYh2:function(e,t,n){(t=e.exports=n("JPst")(!1)).push([e.i,":root {\n    --search-sidebar-width: 325px;\n}\n\n.searchPage-root-pgQ {\n    padding: 1rem;\n}\n\n.searchPage-noResult-Zxz {\n    display: flex;\n}\n\n.searchPage-headerButtons-v21 {\n    display: flex;\n    flex-basis: 100%;\n    justify-content: center;\n    margin: 1rem 0;\n}\n\n.searchPage-heading-1kN {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n}\n\n.searchPage-searchInfo-1PB {\n    line-height: var(--venia-global-typography-heading-lineHeight);\n    margin: 2.5rem 0 1rem;\n    max-width: 75vw;\n}\n\n.searchPage-totalPages-Rlm {\n    margin-left: 0.5rem;\n}\n\n.searchPage-headingHighlight-12s {\n    font-weight: var(--venia-global-fontWeight-bold);\n}\n\n.searchPage-sidebar-Znr {\n    display: none;\n}\n\n@media (min-width: 1024px) {\n    .searchPage-root-pgQ {\n        display: flex;\n        flex-wrap: nowrap;\n    }\n\n    .searchPage-heading-1kN {\n        justify-content: space-between;\n        flex-wrap: nowrap;\n        align-items: center;\n    }\n\n    .searchPage-searchInfo-1PB {\n        margin: 0;\n        flex-basis: 100%;\n    }\n\n    .searchPage-headerButtons-v21 {\n        justify-content: flex-end;\n    }\n\n    .searchPage-sidebar-Znr {\n        display: flex;\n        align-self: flex-start;\n        width: var(--search-sidebar-width);\n        padding-top: 4rem;\n    }\n\n    .searchPage-searchContent-1Ec {\n        flex-grow: 1;\n    }\n}\n",""]),t.locals={root:"searchPage-root-pgQ",noResult:"searchPage-noResult-Zxz",headerButtons:"searchPage-headerButtons-v21",heading:"searchPage-heading-1kN",searchInfo:"searchPage-searchInfo-1PB",totalPages:"searchPage-totalPages-Rlm",headingHighlight:"searchPage-headingHighlight-12s",sidebar:"searchPage-sidebar-Znr",searchContent:"searchPage-searchContent-1Ec"}},N6ZK:function(e,t,n){"use strict"
n.r(t),n.d(t,"default",function(){return W})
var a,r,s,c,l=n("J4zp"),i=n.n(l),o=n("q1tI"),u=n.n(o),g=n("dDsW"),h=n("kriW"),d=n("17x9"),p=n("lSNA"),f=n.n(p),m=n("RIqP"),P=n.n(m),b=n("VX74"),y=n("Ty5D"),j=n("y1Xp"),v=n("OlZo"),E=n("Cszt"),S=n("PKba"),O=n("IOPv"),w=n("Unmo"),x=n("+wQL"),N=n("VkAN"),_=n.n(N),z=Object(b.gql)(a||(a=_()(["\n    query getPageSize {\n        storeConfig {\n            id\n            grid_per_page\n        }\n    }\n"]))),I=Object(b.gql)(r||(r=_()(["\n    query getProductFiltersBySearch($search: String!) {\n        products(search: $search) {\n            aggregations {\n                label\n                count\n                attribute_code\n                options {\n                    label\n                    value\n                }\n            }\n        }\n    }\n"]))),k=Object(b.gql)(s||(s=_()(["\n    query ProductSearch(\n        $currentPage: Int = 1\n        $inputText: String!\n        $pageSize: Int = 6\n        $filters: ProductAttributeFilterInput!\n        $sort: ProductAttributeSortInput\n    ) {\n        products(\n            currentPage: $currentPage\n            pageSize: $pageSize\n            search: $inputText\n            filter: $filters\n            sort: $sort\n        ) {\n            items {\n                id\n                name\n                small_image {\n                    url\n                }\n                url_key\n                url_suffix\n                price {\n                    regularPrice {\n                        amount {\n                            value\n                            currency\n                        }\n                    }\n                }\n                sku\n            }\n            page_info {\n                total_pages\n            }\n            total_count\n        }\n    }\n"]))),C={getFilterInputsQuery:Object(b.gql)(c||(c=_()(['\n    query GetFilterInputsForSearch {\n        __type(name: "ProductAttributeFilterInput") {\n            inputFields {\n                name\n                type {\n                    name\n                }\n            }\n        }\n    }\n']))),getPageSize:z,getProductFiltersBySearchQuery:I,productSearchQuery:k},F=n("C0us"),R=n("vh/y"),Q=n("DUu4"),T=n("tuiD"),$=n("LboF"),q=n.n($),B=n("IYh2"),M=n.n(B),A={injectType:"singletonStyleTag",insert:"head",singleton:!0},D=(q()(M.a,A),M.a.locals||{}),L=n("Y5d+"),Z=n("pezu"),H=u.a.lazy(function(){return Promise.all([n.e(0),n.e(2),n.e(12)]).then(n.bind(null,"dzHx"))}),J=u.a.lazy(function(){return Promise.all([n.e(0),n.e(2),n.e(15)]).then(n.bind(null,"SAkj"))}),U=function SearchPage(e){var t=Object(j.a)(D,e.classes),n=function useSearchPage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(j.a)(C,e.operations),n=t.getFilterInputsQuery,a=t.getPageSize,r=t.getProductFiltersBySearchQuery,s=t.productSearchQuery,c=Object(b.useQuery)(a,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}).data,l=c&&c.storeConfig.grid_per_page,u=Object(w.a)(),g=i()(u,1)[0],h=g.sortAttribute,d=g.sortDirection,p=Object(o.useRef)(g),m=Object(y.h)(),N=m.search,_=Object(o.useRef)(N),z=Object(E.a)(),I=i()(z,2),k=I[0],F=I[1],R=k.currentPage,Q=k.totalPages,T=F.setCurrentPage,$=F.setTotalPages,q=Object(v.b)(),B=i()(q,2)[1],M=B.toggleDrawer,A=B.actions.setPageLoading,D=Object(O.a)("query",m),L=Object(o.useMemo)(function(){var e=Object(x.c)(N)
if(0===e.size)return null
var t=e.get("category_id")
return t?P()(t).map(function(e){return e.split(",")[0]}).join(", "):null},[N]),Z=Object(o.useCallback)(function(){M("filter")},[M]),H=Object(b.useQuery)(n),J=H.called,U=H.data,W=H.loading,Y=Object(o.useMemo)(function(){var e=new Map
return U&&U.__type.inputFields.forEach(function(t){var n=t.name,a=t.type
e.set(n,a.name)}),e},[U]),K={currentPage:R,setPage:T,totalPages:Q},V=Object(b.useLazyQuery)(s,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),X=i()(V,2),G=X[0],ee=X[1],te=ee.called,ne=ee.loading,ae=ee.error,re=ee.data,se=!!re&&ne
Object(o.useEffect)(function(){A(se)},[se,A]),Object(o.useEffect)(function(){if(Y.size&&l){var e=Object(x.c)(N),t={}
e.forEach(function(e,n){t[n]=Object(x.b)(e,Y.get(n))}),G({variables:{currentPage:Number(R),filters:t,inputText:D,pageSize:Number(l),sort:f()({},h,d)}})}},[R,Y,D,G,l,N,d,h]),Object(o.useEffect)(function(){var e=re?re.products.page_info.total_pages:null
return $(e),function(){$(null)}},[re,$]),Object(o.useEffect)(function(){var e=new URLSearchParams(_.current),t=new URLSearchParams(N)
e.delete("page"),t.delete("page"),e.toString()===t.toString()&&p.current.sortAttribute.toString()===g.sortAttribute.toString()&&p.current.sortDirection.toString()===g.sortDirection.toString()||(T(1,!0),_.current=N,p.current=g)},[g,N,T])
var ce=Object(b.useLazyQuery)(r,{fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),le=i()(ce,2),ie=le[0],oe=le[1].data
Object(o.useEffect)(function(){D&&ie({variables:{search:D}})},[ie,D,N])
var ue=oe?oe.products.aggregations:null,ge=J&&!te||ne||W
return Object(S.a)(R),{data:re,error:ae,filters:ue,loading:ge,openDrawer:Z,pageControl:K,searchCategory:L,searchTerm:D,sortProps:u}}(),a=n.data,r=n.error,s=n.filters,c=n.loading,l=n.pageControl,d=n.searchCategory,p=n.searchTerm,m=n.sortProps,N=Object(g.a)().formatMessage,_=i()(m,1)[0],z=Object(o.useMemo)(function(){return!a&&c?Q.a:!a&&r?u.a.createElement("div",{className:t.noResult},u.a.createElement(h.a,{id:"searchPage.noResult",defaultMessage:"No results found. The search term may be missing or invalid."})):a?0===a.products.items.length?u.a.createElement("div",{className:t.noResult},u.a.createElement(h.a,{id:"searchPage.noResultImportant",defaultMessage:"No results found!"})):u.a.createElement(o.Fragment,null,u.a.createElement("section",{className:t.gallery},u.a.createElement(R.a,{items:a.products.items})),u.a.createElement("section",{className:t.pagination},u.a.createElement(F.a,{pageControl:l}))):null},[t.gallery,t.noResult,t.pagination,r,c,a,l]),I=a&&a.products&&a.products.total_count?a.products.total_count:0,k=s&&s.length,$=I,q=k?u.a.createElement(Z.a,{filters:s}):null,B=k?u.a.createElement(H,{filters:s}):null,M=k?u.a.createElement(J,{filters:s}):null,A=$?u.a.createElement(T.a,{sortProps:m}):null,U=$?u.a.createElement(L.a,{currentSort:_}):null,W=a?p?u.a.createElement(h.a,{id:"searchPage.searchTerm",values:{highlight:function highlight(e){return u.a.createElement("span",{className:t.headingHighlight},e)},category:d,term:p},defaultMessage:"Showing results:"}):u.a.createElement(h.a,{id:"searchPage.searchTermEmpty",defaultMessage:"Showing all results:"}):null,Y=a&&!c?u.a.createElement("span",{className:t.totalPages},N({id:"searchPage.totalPages",defaultMessage:"items"},{totalCount:I})):null
return u.a.createElement("article",{className:t.root},u.a.createElement("div",{className:t.sidebar},u.a.createElement(o.Suspense,{fallback:null},M)),u.a.createElement("div",{className:t.searchContent},u.a.createElement("div",{className:t.heading},u.a.createElement("div",{className:t.searchInfo},W,Y),u.a.createElement("div",{className:t.headerButtons},q,A),U),z,u.a.createElement(o.Suspense,{fallback:null},B)))},W=U
U.propTypes={classes:Object(d.shape)({noResult:d.string,root:d.string,totalPages:d.string})}}}])
