{"version":3,"sources":["webpack:///./node_modules/@magento/peregrine/lib/talons/FilterModal/useFilterBlock.js","webpack:///./node_modules/@magento/peregrine/lib/talons/FilterModal/useFilterList.js","webpack:///./node_modules/@magento/peregrine/lib/validators/set.js","webpack:///./node_modules/@magento/peregrine/lib/talons/FilterSidebar/useFilterSidebar.js","webpack:///./node_modules/@magento/venia-ui/lib/components/FilterSidebar/filterSidebar.css?6be2","webpack:///./node_modules/@magento/venia-ui/lib/components/FilterSidebar/filterSidebar.js","webpack:///./node_modules/@magento/venia-ui/lib/components/FilterSidebar/filterSidebar.css","webpack:///./node_modules/react-feather/dist/icons/check-square.js","webpack:///./node_modules/react-feather/dist/icons/chevron-up.js","webpack:///./node_modules/react-feather/dist/icons/square.js"],"names":["useFilterBlock","props","filterState","items","initialOpen","hasSelected","useMemo","some","item","has","isExpanded","setExpanded","useState","useEffect","handleClick","useCallback","value","useFilterList","isListExpanded","handleListToggle","isSet","obj","Set","optionalSet","propName","componentName","prop","type","Error","requiredSet","isRequired","DRAWER_NAME","useFilterSidebar","filters","operations","mergeOperations","DEFAULT_OPERATIONS","getFilterInputsQuery","isApplying","setIsApplying","drawer","toggleDrawer","closeDrawer","useAppContext","filterApi","useFilterState","prevDrawer","useRef","isOpen","history","useHistory","pathname","search","useLocation","data","introspectionData","useQuery","inputFields","__type","attributeCodes","map","attribute_code","DISABLED_FILTERS","disabled","add","possibleFilters","nextFilters","name","isValid","includes","isEnabled","filterNames","filterKeys","filterItems","names","Map","keys","itemsByGroup","filter","options","label","group","set","push","title","stripHtml","nextSearch","getSearchFromState","handleOpen","handleClose","handleApply","handleReset","clear","handleKeyDownActions","event","keyCode","justOpened","current","justClosed","nextState","getStateFromSearch","setItems","SCROLL_OFFSET","FilterSidebar","filterCountToOpen","talonProps","filterRef","classes","useStyle","defaultClasses","handleApplyFilter","args","filterElement","getBoundingClientRect","filterTop","top","windowScrollY","window","scrollY","scrollTo","filtersList","Array","from","iteration","blockState","get","groupName","clearAll","size","action","root","body","header","headerTitle","blocks","defaultProps","propTypes","shape","string","root_open","arrayOf","array","number","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","CheckSquare","forwardRef","_ref","ref","_ref$color","color","_ref$size","rest","React","createElement","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","d","PropTypes","oneOfType","displayName","ChevronUp","Square","x","y","rx","ry"],"mappings":"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","file":"54.7cbc76c558f7e4581a69.js","sourcesContent":["import { useCallback, useState, useEffect, useMemo } from 'react';\n\nexport const useFilterBlock = props => {\n    const { filterState, items, initialOpen } = props;\n\n    const hasSelected = useMemo(() => {\n        return items.some(item => {\n            return filterState && filterState.has(item);\n        });\n    }, [filterState, items]);\n\n    const [isExpanded, setExpanded] = useState(hasSelected || initialOpen);\n\n    useEffect(() => {\n        setExpanded(hasSelected || initialOpen);\n    }, [hasSelected, initialOpen]);\n\n    const handleClick = useCallback(() => {\n        setExpanded(value => !value);\n    }, [setExpanded]);\n\n    return {\n        handleClick,\n        isExpanded\n    };\n};\n","import { useCallback, useState } from 'react';\n\nexport const useFilterList = () => {\n    const [isListExpanded, setExpanded] = useState(false);\n\n    const handleListToggle = useCallback(() => {\n        setExpanded(value => !value);\n    }, [setExpanded]);\n\n    return {\n        handleListToggle,\n        isListExpanded\n    };\n};\n","const isSet = obj => obj instanceof Set;\n\nfunction optionalSet(props, propName, componentName) {\n    const prop = props[propName];\n    const type = typeof prop;\n\n    if (prop != null && !isSet(prop)) {\n        return new Error(\n            `Invalid prop \\`${propName}\\` of type \\`${type}\\` supplied to \\`${componentName}\\`, expected \\`Set\\`.`\n        );\n    }\n}\n\nfunction requiredSet(props, propName, componentName) {\n    const prop = props[propName];\n    const type = typeof prop;\n\n    if (prop == null || !isSet(prop)) {\n        return new Error(\n            `Invalid prop \\`${propName}\\` of type \\`${type}\\` supplied to \\`${componentName}\\`, expected \\`Set\\`.`\n        );\n    }\n}\n\noptionalSet.isRequired = requiredSet;\n\nexport default optionalSet;\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useQuery } from '@apollo/client';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport { useAppContext } from '@magento/peregrine/lib/context/app';\n\nimport mergeOperations from '../../util/shallowMerge';\nimport { useFilterState } from '../FilterModal';\nimport {\n    getSearchFromState,\n    getStateFromSearch,\n    stripHtml\n} from '../FilterModal/helpers';\n\nimport DEFAULT_OPERATIONS from '../FilterModal/filterModal.gql';\n\nconst DRAWER_NAME = 'filter';\n\nexport const useFilterSidebar = props => {\n    const { filters } = props;\n\n    const operations = mergeOperations(DEFAULT_OPERATIONS, props.operations);\n    const { getFilterInputsQuery } = operations;\n\n    const [isApplying, setIsApplying] = useState(false);\n    const [{ drawer }, { toggleDrawer, closeDrawer }] = useAppContext();\n    const [filterState, filterApi] = useFilterState();\n    const prevDrawer = useRef(null);\n    const isOpen = drawer === DRAWER_NAME;\n\n    const history = useHistory();\n    const { pathname, search } = useLocation();\n\n    const { data: introspectionData } = useQuery(getFilterInputsQuery);\n\n    const inputFields = introspectionData\n        ? introspectionData.__type.inputFields\n        : [];\n\n    const attributeCodes = useMemo(\n        () => filters.map(({ attribute_code }) => attribute_code),\n        [filters]\n    );\n\n    // Create a set of disabled filters.\n    const DISABLED_FILTERS = useMemo(() => {\n        const disabled = new Set();\n        // Disable category filtering when not on a search page.\n        if (pathname !== '/search.html') {\n            disabled.add('category_id');\n        }\n\n        return disabled;\n    }, [pathname]);\n\n    // Get \"allowed\" filters by intersection of filter attribute codes and\n    // schema input field types. This restricts the displayed filters to those\n    // that the api will understand.\n    const possibleFilters = useMemo(() => {\n        const nextFilters = new Set();\n\n        // perform mapping and filtering in the same cycle\n        for (const { name } of inputFields) {\n            const isValid = attributeCodes.includes(name);\n            const isEnabled = !DISABLED_FILTERS.has(name);\n\n            if (isValid && isEnabled) {\n                nextFilters.add(name);\n            }\n        }\n\n        return nextFilters;\n    }, [DISABLED_FILTERS, attributeCodes, inputFields]);\n\n    // iterate over filters once to set up all the collections we need\n    const [filterNames, filterKeys, filterItems] = useMemo(() => {\n        const names = new Map();\n        const keys = new Set();\n        const itemsByGroup = new Map();\n\n        for (const filter of filters) {\n            const { options, label: name, attribute_code: group } = filter;\n\n            // If this aggregation is not a possible filter, just back out.\n            if (possibleFilters.has(group)) {\n                const items = [];\n\n                // add filter name\n                names.set(group, name);\n\n                // add filter key permutations\n                keys.add(`${group}[filter]`);\n\n                // add items\n                for (const { label, value } of options) {\n                    items.push({ title: stripHtml(label), value });\n                }\n                itemsByGroup.set(group, items);\n            }\n        }\n\n        return [names, keys, itemsByGroup];\n    }, [filters, possibleFilters]);\n\n    // on apply, write filter state to location\n    useEffect(() => {\n        if (isApplying) {\n            const nextSearch = getSearchFromState(\n                search,\n                filterKeys,\n                filterState\n            );\n\n            // write filter state to history\n            history.push({ pathname, search: nextSearch });\n\n            // mark the operation as complete\n            setIsApplying(false);\n        }\n    }, [filterKeys, filterState, history, isApplying, pathname, search]);\n\n    const handleOpen = useCallback(() => {\n        toggleDrawer(DRAWER_NAME);\n    }, [toggleDrawer]);\n\n    const handleClose = useCallback(() => {\n        closeDrawer();\n    }, [closeDrawer]);\n\n    const handleApply = useCallback(() => {\n        setIsApplying(true);\n        handleClose();\n    }, [handleClose]);\n\n    const handleReset = useCallback(() => {\n        filterApi.clear();\n        setIsApplying(true);\n    }, [filterApi, setIsApplying]);\n\n    const handleKeyDownActions = useCallback(\n        event => {\n            // do not handle keyboard actions when the modal is closed\n            if (!isOpen) {\n                return;\n            }\n\n            switch (event.keyCode) {\n                // when \"Esc\" key fired -> close the modal\n                case 27:\n                    handleClose();\n                    break;\n            }\n        },\n        [isOpen, handleClose]\n    );\n\n    useEffect(() => {\n        const justOpened =\n            prevDrawer.current === null && drawer === DRAWER_NAME;\n        const justClosed =\n            prevDrawer.current === DRAWER_NAME && drawer === null;\n\n        // on drawer toggle, read filter state from location\n        if (justOpened || justClosed) {\n            const nextState = getStateFromSearch(\n                search,\n                filterKeys,\n                filterItems\n            );\n\n            filterApi.setItems(nextState);\n        }\n\n        // on drawer close, update the modal visibility state\n        if (justClosed) {\n            handleClose();\n        }\n\n        prevDrawer.current = drawer;\n    }, [drawer, filterApi, filterItems, filterKeys, search, handleClose]);\n\n    useEffect(() => {\n        const nextState = getStateFromSearch(search, filterKeys, filterItems);\n\n        filterApi.setItems(nextState);\n    }, [filterApi, filterItems, filterKeys, search]);\n\n    return {\n        filterApi,\n        filterItems,\n        filterKeys,\n        filterNames,\n        filterState,\n        handleApply,\n        handleClose,\n        handleKeyDownActions,\n        handleOpen,\n        handleReset,\n        isApplying,\n        isOpen\n    };\n};\n","import api from \"!../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../css-loader/dist/cjs.js??ref--6-oneOf-0-1!./filterSidebar.css\";\n\nvar options = {\"injectType\":\"styleTag\"};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import React, { useMemo, useCallback, useRef, Fragment } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { array, arrayOf, shape, string, number } from 'prop-types';\nimport { useFilterSidebar } from '@magento/peregrine/lib/talons/FilterSidebar';\n\nimport { useStyle } from '../../classify';\nimport LinkButton from '../LinkButton';\nimport CurrentFilters from '../FilterModal/CurrentFilters';\nimport FilterBlock from '../FilterModal/filterBlock';\nimport defaultClasses from './filterSidebar.css';\n\nconst SCROLL_OFFSET = 150;\n\n/**\n * A view that displays applicable and applied filters.\n *\n * @param {Object} props.filters - filters to display\n */\nconst FilterSidebar = props => {\n    const { filters, filterCountToOpen } = props;\n    const talonProps = useFilterSidebar({ filters });\n    const {\n        filterApi,\n        filterItems,\n        filterNames,\n        filterState,\n        handleApply,\n        handleReset\n    } = talonProps;\n\n    const filterRef = useRef();\n    const classes = useStyle(defaultClasses, props.classes);\n\n    const handleApplyFilter = useCallback(\n        (...args) => {\n            const filterElement = filterRef.current;\n            if (\n                filterElement &&\n                typeof filterElement.getBoundingClientRect === 'function'\n            ) {\n                const filterTop = filterElement.getBoundingClientRect().top;\n                const windowScrollY =\n                    window.scrollY + filterTop - SCROLL_OFFSET;\n                window.scrollTo(0, windowScrollY);\n            }\n\n            handleApply(...args);\n        },\n        [handleApply, filterRef]\n    );\n\n    const filtersList = useMemo(\n        () =>\n            Array.from(filterItems, ([group, items], iteration) => {\n                const blockState = filterState.get(group);\n                const groupName = filterNames.get(group);\n\n                return (\n                    <FilterBlock\n                        key={group}\n                        filterApi={filterApi}\n                        filterState={blockState}\n                        group={group}\n                        items={items}\n                        name={groupName}\n                        onApply={handleApplyFilter}\n                        initialOpen={iteration < filterCountToOpen}\n                    />\n                );\n            }),\n        [\n            filterApi,\n            filterItems,\n            filterNames,\n            filterState,\n            filterCountToOpen,\n            handleApplyFilter\n        ]\n    );\n\n    const clearAll = filterState.size ? (\n        <div className={classes.action}>\n            <LinkButton type=\"button\" onClick={handleReset}>\n                <FormattedMessage\n                    id={'filterModal.action'}\n                    defaultMessage={'Clear all'}\n                />\n            </LinkButton>\n        </div>\n    ) : null;\n\n    return (\n        <Fragment>\n            <aside className={classes.root} ref={filterRef}>\n                <div className={classes.body}>\n                    <div className={classes.header}>\n                        <h2 className={classes.headerTitle}>\n                            <FormattedMessage\n                                id={'filterModal.headerTitle'}\n                                defaultMessage={'Filters'}\n                            />\n                        </h2>\n                    </div>\n                    <CurrentFilters\n                        filterApi={filterApi}\n                        filterNames={filterNames}\n                        filterState={filterState}\n                        onRemove={handleApplyFilter}\n                    />\n                    {clearAll}\n                    <ul className={classes.blocks}>{filtersList}</ul>\n                </div>\n            </aside>\n        </Fragment>\n    );\n};\n\nFilterSidebar.defaultProps = {\n    filterCountToOpen: 3\n};\n\nFilterSidebar.propTypes = {\n    classes: shape({\n        action: string,\n        blocks: string,\n        body: string,\n        header: string,\n        headerTitle: string,\n        root: string,\n        root_open: string\n    }),\n    filters: arrayOf(\n        shape({\n            attribute_code: string,\n            items: array\n        })\n    ),\n    filterCountToOpen: number\n};\n\nexport default FilterSidebar;\n","exports = module.exports = require(\"../../../../../css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".filterSidebar-root-1gp {\\n    --borderColor: var(--venia-global-color-border);\\n    background-color: white;\\n    bottom: 0;\\n    display: none;\\n    grid-template-rows: 1fr 7rem;\\n    max-width: 360px;\\n    width: 100%;\\n    z-index: 3;\\n}\\n\\n.filterSidebar-body-gMc {\\n    overflow: auto;\\n}\\n\\n.filterSidebar-header-3K3 {\\n    display: flex;\\n    justify-content: space-between;\\n    padding: 1.25rem 1.25rem 0;\\n}\\n\\n.filterSidebar-headerTitle-3NW {\\n    display: flex;\\n    align-items: center;\\n    font-size: var(--venia-global-typography-heading-L-fontSize);\\n    line-height: 0.875rem;\\n}\\n\\n.filterSidebar-action-2cT {\\n    padding: 1rem 1.25rem 0;\\n}\\n\\n.filterSidebar-action-2cT button {\\n    font-size: var(--venia-typography-body-S-fontSize);\\n    text-decoration: none;\\n}\\n\\n.filterSidebar-blocks-2NG {\\n    padding: 1rem 1.25rem 0;\\n}\\n\\n.filterSidebar-blocks-2NG > li:last-child {\\n    border-bottom: 2px solid rgb(var(--borderColor));\\n}\\n\\n@media (min-width: 1024px) {\\n    .filterSidebar-root-1gp {\\n        display: grid;\\n    }\\n}\\n\", \"\"]);\n\n// Exports\nexports.locals = {\n\t\"root\": \"filterSidebar-root-1gp\",\n\t\"body\": \"filterSidebar-body-gMc\",\n\t\"header\": \"filterSidebar-header-3K3\",\n\t\"headerTitle\": \"filterSidebar-headerTitle-3NW\",\n\t\"action\": \"filterSidebar-action-2cT\",\n\t\"blocks\": \"filterSidebar-blocks-2NG\"\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar CheckSquare = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"9 11 12 14 22 4\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\"\n  }));\n});\nCheckSquare.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nCheckSquare.displayName = 'CheckSquare';\nexport default CheckSquare;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ChevronUp = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"18 15 12 9 6 15\"\n  }));\n});\nChevronUp.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nChevronUp.displayName = 'ChevronUp';\nexport default ChevronUp;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Square = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"3\",\n    y: \"3\",\n    width: \"18\",\n    height: \"18\",\n    rx: \"2\",\n    ry: \"2\"\n  }));\n});\nSquare.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nSquare.displayName = 'Square';\nexport default Square;"],"sourceRoot":""}