/*!
 * @version c010ac55-dev
 * 
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{"5g99":function(n,e,t){"use strict"
t.d(e,"a",function(){return g})
var r,a,c=t("VkAN"),u=t.n(c),i=t("VX74"),o=Object(i.gql)(r||(r=u()(["\n    fragment GiftCardFragment on Cart {\n        __typename\n        id\n    }\n"]))),s=t("fgxC"),l=t("9etB"),m=t("Dmpr"),g=Object(i.gql)(a||(a=u()(["\n    fragment CartPageFragment on Cart {\n        id\n        total_quantity\n        ...AppliedCouponsFragment\n        ...GiftCardFragment\n        ...ProductListingFragment\n        ...PriceSummaryFragment\n    }\n    ","\n    ","\n    ","\n    ","\n"])),m.a,o,s.a,l.a)},"9etB":function(n,e,t){"use strict"
t.d(e,"a",function(){return C})
var r,a,c,u,i,o,s=t("VkAN"),l=t.n(s),m=t("VX74"),g=Object(m.gql)(r||(r=l()(["\n    fragment DiscountSummaryFragment on CartPrices {\n        discounts {\n            amount {\n                currency\n                value\n            }\n            label\n        }\n    }\n"]))),d=Object(m.gql)(a||(a=l()(["\n    fragment GiftCardSummaryFragment on Cart {\n        id\n        __typename\n    }\n"]))),p=Object(m.gql)(c||(c=l()(["\n    fragment ShippingSummaryFragment on Cart {\n        id\n        shipping_addresses {\n            selected_shipping_method {\n                amount {\n                    currency\n                    value\n                }\n            }\n            street\n        }\n    }\n"]))),b=Object(m.gql)(u||(u=l()(["\n    fragment TaxSummaryFragment on CartPrices {\n        applied_taxes {\n            amount {\n                currency\n                value\n            }\n        }\n    }\n"]))),f=Object(m.gql)(i||(i=l()(["\n    fragment GrandTotalFragment on CartPrices {\n        grand_total {\n            currency\n            value\n        }\n    }\n"]))),C=Object(m.gql)(o||(o=l()(["\n    fragment PriceSummaryFragment on Cart {\n        id\n        items {\n            id\n            quantity\n        }\n        ...ShippingSummaryFragment\n        prices {\n            ...TaxSummaryFragment\n            ...DiscountSummaryFragment\n            ...GrandTotalFragment\n            subtotal_excluding_tax {\n                currency\n                value\n            }\n        }\n        ...GiftCardSummaryFragment\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"])),g,d,f,p,b)},Dmpr:function(n,e,t){"use strict"
t.d(e,"a",function(){return i})
var r,a=t("VkAN"),c=t.n(a),u=t("VX74"),i=Object(u.gql)(r||(r=c()(["\n    fragment AppliedCouponsFragment on Cart {\n        id\n        applied_coupons {\n            code\n        }\n    }\n"])))},fgxC:function(n,e,t){"use strict"
t.d(e,"a",function(){return i})
var r,a=t("VkAN"),c=t.n(a),u=t("VX74"),i=Object(u.gql)(r||(r=c()(["\n    fragment ProductListingFragment on Cart {\n        id\n        items {\n            id\n            product {\n                id\n                name\n                sku\n                url_key\n                url_suffix\n                thumbnail {\n                    url\n                }\n                small_image {\n                    url\n                }\n                stock_status\n                ... on ConfigurableProduct {\n                    variants {\n                        attributes {\n                            uid\n                        }\n                        product {\n                            id\n                            small_image {\n                                url\n                            }\n                        }\n                    }\n                }\n            }\n            prices {\n                price {\n                    currency\n                    value\n                }\n            }\n            quantity\n            ... on ConfigurableCartItem {\n                configurable_options {\n                    id\n                    configurable_product_option_value_uid\n                    option_label\n                    value_id\n                    value_label\n                }\n            }\n        }\n    }\n"])))},oXFV:function(n,e,t){"use strict"
t.r(e),t.d(e,"default",function(){return LoginAsCustomer})
var r,a=t("q1tI"),c=t.n(a),u=t("o0o1"),i=t.n(u),o=t("yXPU"),s=t.n(o),l=t("MVZn"),m=t.n(l),g=t("J4zp"),d=t.n(g),p=t("VX74"),b=t("cG95"),f=t("GpxZ"),C=t("y1Xp"),O=t("9872"),j=t("FITH"),v=t("97VA"),_=t("8jsZ"),y=t("Ty5D"),h=t("IOPv"),F=t("VkAN"),k=t.n(F),x=Object(p.gql)(r||(r=k()(["\nmutation generateCustomerTokenOnSecret($secret:String!) {\n    generateCustomerTokenOnSecret(\n        input: {\n        secret: $secret      \n        }\n    ) {\n        customer_token\n    }\n}\n"]))),S=t("/MKj"),q=t("hiVw"),A=t("0990"),V=t("LvDl"),D=t("MKVD"),P=t("bACQ"),w=function useCustomerLogin(n){var e=Object(S.c)(),t=Object(y.h)(),r=Object(h.a)("secret",t),c=Object(C.a)(q.a,n.operations),u=c.createCartMutation,o=c.getCustomerQuery,l=(c.signInMutation,Object(A.a)().assignCompareList),g=Object(S.d)(function(n){return n.compare.uid}),F=Object(p.useApolloClient)(),k=Object(a.useState)(!1),w=d()(k,2),I=w[0],T=w[1],G=Object(O.b)(),X=d()(G,2),M=X[0].cartId,L=X[1],E=L.createCart,N=L.removeCart,U=L.getCartDetails,J=Object(j.b)(),Z=d()(J,2),$=Z[0],z=$.isGettingDetails,B=($.getDetailsError,Z[1]),K=B.getUserDetails,Q=B.setToken,H=Object(p.useMutation)(x,{fetchPolicy:"no-cache"}),R=d()(H,2),W=R[0],Y=R[1],nn=(Y.loading,Y.error),en=Object(p.useMutation)(u),tn=d()(en,1)[0],rn=Object(p.useMutation)(P.a,{onCompleted:function onCompleted(n){var t=Object(V.get)(n,"mergeCarts",{})
e(loginAndFetchCheckoutComplete(m()({},t)))},onError:function onError(){e(loginAndFetchCheckoutComplete())}}),an=d()(rn,1)[0],cn=Object(v.a)(o),un=Object(v.a)(D.a)
return Object(a.useEffect)(s()(i.a.mark(function _callee(){var n,e,t,a
return i.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return T(!0),c.prev=1,n=M,c.next=5,W({variables:{secret:r}})
case 5:return e=c.sent,t=e.data.generateCustomerTokenOnSecret.customer_token,c.next=9,Q(t)
case 9:return Object(V.size)(g)>0&&l({variables:{uid:g}}),c.next=12,Object(b.a)(F)
case 12:return c.next=14,Object(f.a)(F)
case 14:return c.next=16,N()
case 16:return c.next=18,E({fetchCartId:tn})
case 18:return c.next=20,Object(_.retrieveCartId)()
case 20:return a=c.sent,c.next=23,an({variables:{destinationCartId:a,sourceCartId:n}})
case 23:K({fetchUserDetails:cn}),U({fetchCartId:tn,fetchCartDetails:un}),c.next=31
break
case 27:c.prev=27,c.t0=c.catch(1),T(!1)
case 31:case"end":return c.stop()}},_callee,null,[[1,27]])})),[r]),{loading:z||I,error:nn}},I=t("DUu4")
function LoginAsCustomer(){var n=w({}),e=n.loading,t=n.error
return e?I.a:t?c.a.createElement("div",null,Object(V.get)(t,"message","somethign went wrong")):c.a.createElement("div",null,"loginAsCustomer success")}},qAkX:function(n,e,t){"use strict"
e.a=function last(n){var e=null==n?0:n.length
return e?n[e-1]:void 0}}}])
